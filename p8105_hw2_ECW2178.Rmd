---
title: "p8105_hw2_ECW2178"
output: github_document
---

Problem 1
```{r}
library(tidyverse)
pols_month = read.csv("~/Downloads/p8105_hw2_ecw2178/fivethirtyeight_datasets/pols-month.csv")
unemployment = read.csv("~/Downloads/p8105_hw2_ecw2178/fivethirtyeight_datasets/unemployment.csv")
snp = read.csv("~/Downloads/p8105_hw2_ecw2178/fivethirtyeight_datasets/snp.csv")
```

```{r}
pols_month = pols_month %>% 
  separate(mon, c("year", "month", "day")) %>% 
  mutate(
    month = 
      case_match(
        month, 
        "01" ~ "January", 
        "02" ~ "February",
        "03" ~ "March", 
        "04" ~ "April", 
        "05" ~ "May",
        "06" ~ "June", 
        "07" ~ "July", 
        "08" ~ "August",
        "09" ~ "September", 
        "10" ~ "October", 
        "11" ~ "November",
        "12" ~ "December")) %>% 
  mutate(
    president = 
      case_match(
        prez_gop, 
        0 ~ "dem", 
        1 ~ "gop")) %>% 
  select(-day, -prez_gop, -prez_dem)

```


```{r}
snp = snp %>% 
  arrange(year) %>% 
  mutate(date = as.character(mdy(date))) %>% 
  separate(date, c("year", "month", "day")) %>% 
    mutate(
    month = 
      case_match(
        month, 
        "01" ~ "January", 
        "02" ~ "February",
        "03" ~ "March", 
        "04" ~ "April", 
        "05" ~ "May",
        "06" ~ "June", 
        "07" ~ "July", 
        "08" ~ "August",
        "09" ~ "September", 
        "10" ~ "October", 
        "11" ~ "November",
        "12" ~ "December"))
      
```


```{r}
unemployment = unemployment %>%
  pivot_longer(
    cols = Jan:Dec,
    names_to = "month",
    values_to = "unemployment") %>%
  rename(year = Year) %>% 
    mutate(
    month = 
      case_match(
        month, 
        "Jan" ~ "January", 
        "Feb" ~ "February",
        "Mar" ~ "March", 
        "Apr" ~ "April", 
        "May" ~ "May",
        "Jun" ~ "June", 
        "Jul" ~ "July", 
        "Aug" ~ "August",
        "Sep" ~ "September", 
        "Oct" ~ "October", 
        "Nov" ~ "November",
        "Dec" ~ "December")) %>% 
  mutate(year = as.character(year))
```


```{r}
pols_snp = left_join(pols_month, snp, by = c("year" , "month"))
pols_snp_unemployment = left_join(pols_snp, unemployment, by = c("year", "month"))
```

The pols_month dataset contains the a count of the presidential and congressional breakdown by party (Democrat and Republican) on the 15th day of each month. The snp dataset contained the values of the S&P stock index at market close near the beginning of each month. The unemployment datatset contains the unemployment rate of each month of each year starting from 1948 to 2015. The resulting finalized and merged dataset has 822 observations with 12 variables containing all of variables of each dataset. There are some missing values because the unemployment dataset does not have day-specific entries and there is a mismatch between when each dataset started collecting data. 


Problem 2 
```{r}
library(readxl)
mr_trash_wheel = read_excel("~/Downloads/p8105_hw2_ecw2178/202509 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", range = cell_cols("A:N"))
trash_wheel = janitor::clean_names(mr_trash_wheel) %>% 
  drop_na(dumpster) %>% 
  mutate(sports_balls = as.integer(round(sports_balls)))
mr_trash_wheel$ID = rep("MrTrashWheel")

prof_trash_wheel = read_excel("~/Downloads/p8105_hw2_ecw2178/202509 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel")
prof_trash_wheel = janitor::clean_names(prof_trash_wheel) %>% 
  drop_na(dumpster)
prof_trash_wheel$ID = rep("ProfTrashWheel")

gwynn_trash_wheel = read_excel("~/Downloads/p8105_hw2_ecw2178/202509 Trash Wheel Collection Data.xlsx", sheet = "Gwynns Falls Trash Wheel")
gwynn_trash_wheel = janitor::clean_names(gwynn_trash_wheel) %>% 
  drop_na(dumpster)
gwynn_trash_wheel$ID = rep("GwynnTrashWheel")
```

Problem 3 
```{r}
library(lubridate)
zip = read.csv("~/Downloads/p8105_hw2_ecw2178/zillow_data/Zip Codes.csv") %>% 
  na.omit() %>% 
  mutate(
    date = ymd(File.Date))
zip = janitor::clean_names(zip)



zori = read.csv("~/Downloads/p8105_hw2_ecw2178/zillow_data/Zip_zori_uc_sfrcondomfr_sm_month_NYC.csv") %>% 
  na.omit()
zori = janitor::clean_names(zori)
zori = zori %>% 
  mutate(zip_code = region_name) %>% 
    pivot_longer(
      cols = x2015_01_31:x2024_08_31,
      names_to = "date",
      values_to = "value") %>% 
  mutate(date = gsub("^x", "", date)) %>% 
  mutate(date = gsub("_", "/", date)) %>% 
  mutate(
    date = ymd(date))

zip_zori = full_join(zip, zori, by = c("zip_code", "date")) %>% 
  mutate(zip_code = as.factor(zip_code)) %>% 
  mutate(neighborhood = as.factor(neighborhood)) 
```

There are 180 unique zip codes in this dataset with 5748 observations and 18 variables


